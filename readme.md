# Weather api

This is the name of the project. Through this project I wanted to show how an Api () is used, I used WeatherAPI.com.
This is a weather API, which provides extensive information ranging from real-time weather forecast, historical weather, air quality data, IP search, time zone, and more.
 
### Architecture

![N|Solid](https://github.com/constantin69/ProiectFinalSwiss/raw/master/Arch%20diagram.png)

### Project description

The base URL I use in this project is:
http://api.weatherapi.com/v1

We provide following data through our API:

 * Real-time weather
 * 3 day weather forecast
 * Historical weather
 * Future Weather
 * Time zone
 * Location data
 * Search or Autocomplete API
 * Weather Alerts
 * Air Quality Data

#### Request

Request URL
Request to WeatherAPI.com API consists of base url and API method. 
Base URL: http://api.weatherapi.com/v1

| API | API Method |
| ------ | ------ |
| Forecast | /forecast.json |

#### Search API
WeatherAPI.com Search or Autocomplete API returns matching cities and towns as an array of Location object.

##### Location Object

Location object is returned with each API response. It is actually the matched location for which the information has been returned.

It returns information about the location including geo points, name, region, country and time zone information as well.

| Field | Description |
| ------ | ------ |
| name | Location name |
| region | Region or state of the location |
| country | Location country |
| lat | Latitude in decimal degree |
| lon | Longitude in decimal degree |
| tz_id | Time zone name |

The user enters from the keyboard the parameters about location, language and number that will be used in the Api (params) structure.
Response will provide weather information, weather forecast for {number} days, weather alert information, day weather history.
This post-processing information will be written to {"location"}. the file will have the name of that location.
To present temperature charts within 24 hours, the information is taken from the file generated by the application, {"location"}.


##### Weather Alerts

Forecast API returns alerts and warnings issued by government agencies (USA, UK, Europe and Rest of the World) as an array if available for the location provided through the Forecast API.

##### Example response of alerts

```
"alerts":{
    "alert":[
        {
        "headline":"Flood Warning issued January 05 at 9:47PM EST until January 07 at 6:15AM EST by NWS",
        "msgtype":"Alert",
        "severity":"Moderate",
        "urgency":"Expected",
        "areas":"Calhoun; Lexington; Richland",
        "event":"Flood Warning",
        "effective":"2021-01-05T21:47:00-05:00",
        "expires":"2021-01-07T06:15:00-05:00",
        "desc":"...The Flood Warning continues for the following rivers in South\nCarolina...\nCongaree River At Carolina Eastman affecting Richland, Calhoun\nand Lexington Counties.\nCongaree River At Congaree National Park-Gadsden affecting\nCalhoun and Richland Counties.\nNorth Fork Edisto River At Orangeburg affecting Orangeburg County.\n...This crest compares to a previous crest of 116.3\nfeet on 12/03/2020.\n&&",
        },
```

##### Air Quality Data

Air Quality data is returned in the Forecast API and Realtime API response. Depending upon your subscription plan we provide current and 3 day air quality data for the given location in json and xml.

It provides air quality index (see below) data on major pollutant gases like Carbon monoxide (CO), Ozone (O3), Nitrogen dioxide (NO2), Sulphur dioxide (SO2), PM 2.5 and PM 10.

By default air quality data is not returned. To get air quality data back in the response from Forecast API and Realtime API, pass the parameter aqi=yes.

| Field | Description |
| ------ | ------ |
| co | Carbon Monoxide (μg/m3) |
| o3 | Ozone (μg/m3) |
| no2 | Nitrogen dioxide (μg/m3) |
| so2 | Sulphur dioxide (μg/m3) |
| pm2_5 | PM2.5 (μg/m3) |
| pm10 | PM10 (μg/m3) |
| us-epa-index | US - EPA standard.
|              |1 means Good   |
|              |2 means Moderate|
|              |3 means Unhealthy for sensitive group|
|              |4 means Unhealthy|
|              |5 means Very Unhealthy|
|              |6 means Hazardous |
| gb-defra-index | UK Defra Index  |

##### Realtime API

Current weather or realtime weather API method allows a user to get up to date current weather information in json. The data is returned as a Current Object.
Current object contains current or realtime weather information for a given city.

| Field | Description |
| ------ | ------ |
| temp_c | Temperature in celsius |
| condition:text |Weather condition text |
| wind_mph | Wind speed in miles per hour |
| wind_kph | Wind speed in kilometer per hour |
| wind_dir | Wind direction as 16 point compass. e.g.: NSW |
| pressure_mb | Pressure in millibars |
| precip_mm | Precipitation amount in millimeters|
| humidity  |Humidity as percentage   |
| uv        |UV Index|
|              |3 means Unhealthy for sensitive group|
|              |4 means Unhealthy|
|              |5 means Very Unhealthy|
|              |6 means Hazardous |
| gb-defra-index | UK Defra Index  |


##### Forecast API

Forecast weather API method returns upto next {"numar"} day weather forecast and weather alert as json. The data is returned as a Forecast Object.


Forecast object contains day weather forecast and hourly interval weather information for a given city.

forecastday: Parent element

forecastday -> day: 'day' element inside forecastday contains max/min temperature, average temperature

forecastday -> astro
forecastday -> hour:

| Forecastday | Parent element |
| ------ | ------ |
| forecastday -> day | day element contains:
|                    | * Max, min and average temperature
|                    | * Max wind speed
|                    | * Total precipitation
|                    | * Day weather conditionTemperature in celsius |
|forecastday -> astro |astro element contains sunrise, sunset, moonrise and moonset data |
| forecastday -> hour |hour element contains hour by hour weather forecast information |

##### forecastday

| Field | Description |
| ------ | ------ |
| date | Forecast date |
|day |See day element |
| astro | See astro element |
| hour | See hour element |

##### day Element

|Field	|	Description|
|-------|--------------|
|maxtemp_c|	Maximum temperature in celsius for the day|
|mintemp_c|	Minimum temperature in celsius for the day|
|avgtemp_c|	Average temperature in celsius for the day|
|maxwind_kph|Maximum wind speed in kilometer per hour|
|totalprecip_mm|Total precipitation in milimeter|
|condition:text|Weather condition text|
|uv|	decimal	UV Index|

##### astro Element
|Field|Type	Description|
|-----|----------------|
|sunrise|Sunrise time|
|sunset|Sunset time|
|moonrise|Moonrise time
|moonset|Moonset time|
|moon_phase|Moon phases.|

##### hour Element
|Field|	Description|
|-----|------------|
|time|Date and time|
|temp_c|Temperature in celsius|
|condition:text|Weather condition text|
|wind_kph|Maximum wind speed in kilometer per hour|
|wind_dir|Wind direction as 16 point compass. e.g.: NSW|
|pressure_mb|Pressure in millibars|
|precip_mm|Precipitation amount in millimeters|
|humidity|Humidity as percentage|


### Installation
The install command reads the pyproject.toml file from the current project, resolves the dependencies, and installs them.

```sh
poetry install
```

- Plotly's Python graphing library 
```sh
python -m pip install requests

```sh
pip install plotly==5.7.0 
```

- Plotly's Python graphing library 

```sh
pip install plotly==5.7.0 
```
```sh
import plotly.express
```

- Plotly's Python graphing library 

```sh
pip install pandas
```
- Python CSV
```sh
import csv
```
